(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{7641:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/discount",function(){return a(4313)}])},2049:function(e,s,a){"use strict";var t=a(5893);a(7294);let d=()=>(0,t.jsx)("div",{className:"fixed top-0 left-0 w-screen h-screen z-20",children:(0,t.jsxs)("div",{className:"flex md:flex-row flex-xol flex-wrap justify-center items-center bg-white h-screen sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"w-full sm:w-80 bg-white rounded-md shadow-xl m-3",children:[(0,t.jsx)("div",{className:"h-44 bg-gray-300 rounded-t-md animate-pulse"}),(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-1 mt-2 w-1/2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("div",{className:"flex w-screen md:w-full sm:w-96 bg-white rounded-md shadow-xl",children:[(0,t.jsx)("div",{className:"w-1/3 bg-gray-300 rounded-l-md animate-pulse"}),(0,t.jsxs)("div",{className:"p-5 w-3/4",children:[(0,t.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]}),(0,t.jsxs)("div",{className:"flex w-screen md:w-full sm:w-96 bg-white rounded-md shadow-xl",children:[(0,t.jsx)("div",{className:"w-1/3 bg-gray-300 rounded-l-md animate-pulse"}),(0,t.jsxs)("div",{className:"p-5 w-3/4",children:[(0,t.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]})]})]})});s.Z=d},4313:function(e,s,a){"use strict";a.r(s);var t=a(5893),d=a(7294),l=a(1163),n=a.n(l);a(1955);var i=a(2049),r=a(6154),m=a(2782);let c=()=>{let e=(0,d.useContext)(m.Z),[s,a]=(0,d.useState)(!0),[l,c]=(0,d.useState)(""),[o,u]=(0,d.useState)(""),[x,h]=(0,d.useState)(""),[g,p]=(0,d.useState)(""),[j,b]=(0,d.useState)(null),[f,N]=(0,d.useState)({}),[v,y]=(0,d.useState)(""),[w,S]=(0,d.useState)(!1),[_,k]=(0,d.useState)([]),[C,E]=(0,d.useState)([]),[T,q]=(0,d.useState)(""),[I,Z]=(0,d.useState)([]),[z,D]=(0,d.useState)(""),[P,A]=(0,d.useState)({}),[R,L]=(0,d.useState)(""),[M,O]=(0,d.useState)(0),[U,F]=(0,d.useState)(0);(async function(){let e=localStorage.getItem("token");if(e)try{let s=await fetch("/api/middleware/auth?token=".concat(e),{method:"POST"});s.ok||n().push({pathname:"/login",query:{message:"Token Invalid"}})}catch(e){console.log(e),n().push({pathname:"/login",query:{message:"Token Expired"}})}else n().push({pathname:"/login",query:{message:"Token Invalid"}})})(),(0,d.useEffect)(()=>{let e=setTimeout(()=>{a(!1)},3e3);return()=>clearTimeout(e)},[]);let X=async()=>{try{let e=await r.Z.get("/api/admin/category");E(e.data)}catch(e){y("Internet Connection not Stable"),S(!0),setTimeout(()=>{S(!0)},3e3)}};(0,d.useEffect)(()=>{X()},[]);let B=async()=>{let e=await r.Z.get("/api/admin/products");k(e.data),Z(e.data),y(e.data.message),e.data.message};(0,d.useEffect)(()=>{B()},[]);let H=(e,s)=>{L(e),A(a=>({...a,[e]:s}))},G=async e=>{e.preventDefault(),a(!0);let s=P[R];try{let e=await r.Z.post("/api/discount?id=".concat(R,"&discount=").concat(s));B(),y(e.data.message),S(!0),a(!1)}catch(e){a(!1),y("Internet not Stable"),S(!0)}setTimeout(()=>{S(!1)},3e3)},J=e=>{O(e.target.value)},K=async()=>{try{let e=await r.Z.get("/api/admin/shipping");F(e.data.data[0].shipping)}catch(e){y("Internet Connection not Stable. "),S(!0)}setTimeout(()=>{S(!1)},3e3)};(0,d.useEffect)(()=>{K()},[]);let Q=async e=>{e.preventDefault(),a(!0);try{let e=await r.Z.post("/api/admin/shipping?cost=".concat(M));y(e.data.message),K(),S(!0),a(!1)}catch(e){y("Something went Roung. "),S(!0),a(!1)}};return(0,d.useEffect)(()=>{let s=I.filter(s=>s.name.toLowerCase().includes(e.query.toLowerCase()));0==s.length?D("Users not Found"):D(e.query),k(s)},[e.query]),(0,t.jsxs)("div",{children:[s?(0,t.jsx)(i.Z,{}):null,w&&(0,t.jsx)("div",{className:"fixed top-0 left-0 lg:left-auto right-0 z-50 p-4",children:(0,t.jsxs)("div",{className:"mx-auto max-w-sm bg-white rounded-lg shadow-lg flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-8 w-8 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16 10a6 6 0 11-12 0 6 6 0 0112 0zm-6 5a1 1 0 100-2 1 1 0 000 2zm0-10a1 1 0 100-2 1 1 0 000 2zM5.78 14.55a4.002 4.002 0 01-1.513-1.513A5.984 5.984 0 013 10a6 6 0 1111.268 3H13a1 1 0 00-1 1v1a1 1 0 102 0v-1a3 3 0 00-3-3h-.268A5.992 5.992 0 015.78 14.55zM10 12a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"ml-4",children:(0,t.jsx)("div",{className:"mt-2 mx-2 text-sm text-gray-500",children:v})})]})}),(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mt-8 mb-4",children:"Product CRUD Page"}),(0,t.jsxs)("form",{onSubmit:Q,children:[(0,t.jsx)("label",{htmlFor:"shipping-cost",className:"block font-medium text-gray-700",children:"Shipping Cost"}),(0,t.jsx)("p",{children:U}),(0,t.jsx)("div",{className:"mt-1 relative rounded-md shadow-sm",children:(0,t.jsx)("input",{id:"shipping-cost",type:"number",required:!0,value:M,onChange:J,className:"focus:ring-indigo-500 focus:border-indigo-500 px-2 border mx-2 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Enter shipping cost"})}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Upload Shipping Cost"})})]}),(0,t.jsxs)("div",{className:"my-8",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Discount List"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"table-auto border-collapse w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 font-bold text-left",children:"Image"}),(0,t.jsx)("th",{className:"px-4 py-2 font-bold text-left",children:"ID"}),(0,t.jsx)("th",{className:"px-4 py-2 font-bold text-left",children:"Name"}),(0,t.jsx)("th",{className:"px-4 py-2 font-bold text-left",children:"Discount"}),(0,t.jsx)("th",{className:"px-4 py-2 font-bold text-left",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:_.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{className:"border px-4 py-2",children:[" ",(0,t.jsx)("img",{src:e.image})," "]}),(0,t.jsx)("td",{className:"border px-4 py-2",children:e._id}),(0,t.jsx)("td",{className:"border px-4 py-2",children:e.name}),(0,t.jsxs)("td",{className:"border px-4 py-2",children:[e.discount," %"]}),(0,t.jsx)("td",{className:"border px-4 py-2",children:(0,t.jsxs)("form",{className:"flex items-center",onSubmit:G,children:[(0,t.jsx)("input",{type:"number",className:"border rounded px-2 py-1 mr-2",id:e._id,onChange:s=>H(e._id,s.target.value),value:P[e._id]||"",required:!0}),(0,t.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors duration-300",children:"Apply Discount"})]})})]}))})]})})]})]})]})};s.default=c}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7641)}),_N_E=e.O()}]);