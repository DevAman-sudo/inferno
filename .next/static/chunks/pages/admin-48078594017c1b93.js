(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{7953:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return a(2307)}])},2049:function(e,s,a){"use strict";var l=a(5893);a(7294);let t=()=>(0,l.jsx)("div",{className:"fixed top-0 left-0 w-screen h-screen z-20",children:(0,l.jsxs)("div",{className:"flex md:flex-row flex-xol flex-wrap justify-center items-center bg-white h-screen sm:px-6 lg:px-8",children:[(0,l.jsxs)("div",{className:"w-full sm:w-80 bg-white rounded-md shadow-xl m-3",children:[(0,l.jsx)("div",{className:"h-44 bg-gray-300 rounded-t-md animate-pulse"}),(0,l.jsxs)("div",{className:"p-5",children:[(0,l.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-1 mt-2 w-1/2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"flex w-screen md:w-full sm:w-96 bg-white rounded-md shadow-xl",children:[(0,l.jsx)("div",{className:"w-1/3 bg-gray-300 rounded-l-md animate-pulse"}),(0,l.jsxs)("div",{className:"p-5 w-3/4",children:[(0,l.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]}),(0,l.jsxs)("div",{className:"flex w-screen md:w-full sm:w-96 bg-white rounded-md shadow-xl",children:[(0,l.jsx)("div",{className:"w-1/3 bg-gray-300 rounded-l-md animate-pulse"}),(0,l.jsxs)("div",{className:"p-5 w-3/4",children:[(0,l.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]})]})]})});s.Z=t},2307:function(e,s,a){"use strict";a.r(s);var l=a(5893),t=a(1163),d=a.n(t),i=a(7294),n=a(6154),r=a(8260);a(1955);var c=a(2049);let m=()=>{let[e,s]=(0,i.useState)(!0),[a,t]=(0,i.useState)([]),[m,x]=(0,i.useState)(""),[o,h]=(0,i.useState)(""),[g,u]=(0,i.useState)(!1),[j,f]=(0,i.useState)(0),[N,p]=(0,i.useState)([]),[v,w]=(0,i.useState)([]);!async function(){let e=localStorage.getItem("token");if(e)try{let s=await fetch("/api/middleware/auth?token=".concat(e),{method:"POST"});s.ok||d().push({pathname:"/login",query:{message:"Token Invalid"}})}catch(e){console.log(e),d().push({pathname:"/login",query:{message:"Token Expired"}})}else d().push({pathname:"/login",query:{message:"Token Invalid"}})}();let y=async()=>{s(!0);try{let e=await n.Z.get("/api/admin/sales");f(e.data.totalSales),p(e.data.salesData)}catch(e){console.log(e),h("Internet connection not stable. "),u(!0)}setTimeout(()=>{u(!1)},3e3)};(0,i.useEffect)(()=>{y()},[]);let b=async()=>{try{let e=await n.Z.get("/api/admin/orders");w(e.data)}catch(e){console.log(e),h("Internet connection not stable. "),u(!0)}setTimeout(()=>{u(!1)},3e3)};(0,i.useEffect)(()=>{b()},[]);let k=async()=>{let e=await fetch("/api/admin");s(!1);let a=await e.json();t(a)};return(0,i.useEffect)(()=>{let e=async()=>{try{let e=await n.Z.get("/api/admin/signups");x(e.data.signups)}catch(e){console.log(e)}};e()},[]),(0,l.jsxs)("div",{children:[e?(0,l.jsx)(c.Z,{}):null,g&&(0,l.jsx)("div",{className:"fixed top-0 left-0 lg:left-auto right-0 z-50 p-4",children:(0,l.jsxs)("div",{className:"mx-auto max-w-sm bg-white rounded-lg shadow-lg flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("svg",{className:"h-8 w-8 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M16 10a6 6 0 11-12 0 6 6 0 0112 0zm-6 5a1 1 0 100-2 1 1 0 000 2zm0-10a1 1 0 100-2 1 1 0 000 2zM5.78 14.55a4.002 4.002 0 01-1.513-1.513A5.984 5.984 0 013 10a6 6 0 1111.268 3H13a1 1 0 00-1 1v1a1 1 0 102 0v-1a3 3 0 00-3-3h-.268A5.992 5.992 0 015.78 14.55zM10 12a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),(0,l.jsx)("div",{className:"ml-4",children:(0,l.jsx)("div",{className:"mt-2 mx-2 text-sm text-gray-500",children:o})})]})}),(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"flex overflow-hidden bg-white pt-16",children:(0,l.jsx)("div",{id:"main-content",className:"h-full w-full bg-gray-50 overflow-y-auto",children:(0,l.jsx)("main",{children:(0,l.jsxs)("div",{className:"pt-6 px-4",children:[(0,l.jsxs)("div",{className:"w-full grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"bg-white shadow rounded-md p-4 sm:p-6 xl:p-8 2xl:col-span-2",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,l.jsxs)("div",{className:"flex-shrink-0",children:[(0,l.jsxs)("span",{className:"text-2xl sm:text-3xl leading-none font-bold text-gray-900",children:["Rs ",j.toLocaleString("en-IN")]}),(0,l.jsx)("h3",{className:"text-base font-normal text-gray-500",children:"Sales this week"})]})}),(0,l.jsx)("div",{id:"main-chart"})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-md p-4 sm:p-6 xl:p-8 ",children:[(0,l.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Latest Transactions"}),(0,l.jsx)("span",{className:"text-base font-normal text-gray-500",children:"This is a list of latest transactions"})]}),(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("a",{href:"/admin/payment",className:"text-sm font-medium text-cyan-600 hover:bg-gray-100 rounded-md p-2",children:"View all"})})]}),(0,l.jsx)("div",{className:"flex flex-col mt-8",children:(0,l.jsx)("div",{className:"overflow-x-auto rounded-md",children:(0,l.jsx)("div",{className:"align-middle inline-block min-w-full",children:(0,l.jsxs)("div",{className:"shadow overflow-hidden sm:rounded-md",children:[(0,l.jsx)("p",{children:"NOTE: amount without shipping cost"}),(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction"}),(0,l.jsx)("th",{scope:"col",className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,l.jsx)("th",{scope:"col",className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),(0,l.jsx)("tbody",{className:"bg-white",children:v.slice(0,10).map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{className:"p-4 whitespace-nowrap text-sm font-normal text-gray-900",children:["Payment from"," ",(0,l.jsx)("span",{className:"font-semibold",children:e.user.name})]}),(0,l.jsx)("td",{className:"p-4 whitespace-nowrap text-sm font-normal text-gray-500",children:(0,r.Z)(new Date(e.dateOrdered),"MM/dd/yyyy")}),(0,l.jsxs)("td",{className:"p-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:["Rs"," ",e.totalPrice.toLocaleString("en-IN")]})]}))})]})]})})})})]})]}),(0,l.jsx)("div",{className:"mt-4 w-full grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:(0,l.jsx)("div",{className:"bg-white shadow rounded-md p-4 sm:p-6 xl:p-8 ",children:(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("div",{className:"flex-shrink-0",children:[(0,l.jsx)("span",{className:"text-2xl sm:text-3xl leading-none font-bold text-gray-900",children:m&&(0,l.jsx)("span",{children:m})}),(0,l.jsx)("h3",{className:"text-base font-normal text-gray-500",children:"User signups this week"})]})})})}),(0,l.jsx)("div",{className:"grid grid-cols-1 2xl:grid-cols-2 xl:gap-4 my-4",children:(0,l.jsxs)("div",{className:"bg-white shadow rounded-md mb-4 p-4 sm:p-6 h-full",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold leading-none text-gray-900",children:"Latest Customers"}),(0,l.jsx)("a",{href:"/admin/viewUsers",className:"text-sm font-medium text-cyan-600 hover:bg-gray-100 rounded-md inline-flex items-center p-2",children:"View all"})]}),((0,i.useEffect)(()=>{k()},[]),a.slice(0,5).map(e=>(0,l.jsx)("div",{className:"flow-root",children:(0,l.jsx)("ul",{role:"list",className:"divide-y divide-gray-200",children:(0,l.jsx)("li",{className:"py-3 sm:py-4 border border-b-2 px-2",children:(0,l.jsx)("div",{className:"flex items-center space-x-4",children:(0,l.jsxs)("div",{className:"flex-1 min-w-0 md:flex justify-evenly",children:[(0,l.jsxs)("p",{className:"flex-1 text-sm font-medium text-gray-900 truncate",children:["ID: ",e._id]}),(0,l.jsxs)("p",{className:"flex-1 text-sm font-medium text-gray-900 truncate",children:["NAME: ",e.name]}),(0,l.jsx)("p",{className:"flex-1 text-sm text-gray-500 truncate",children:(0,l.jsxs)("a",{href:"/cdn-cgi/l/email-protection",className:"__cf_email__","data-cfemail":"17727a767e7b57607e7973646372653974787a",children:["EMAIL: ",e.email]})})]})})})})})))]})})]})})})})})]})};s.default=m}},function(e){e.O(0,[260,774,888,179],function(){return e(e.s=7953)}),_N_E=e.O()}]);