(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{5729:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gateway",function(){return a(7561)}])},2049:function(e,s,a){"use strict";var l=a(5893);a(7294);let r=()=>(0,l.jsx)("div",{className:"fixed top-0 left-0 w-screen h-screen z-20",children:(0,l.jsxs)("div",{className:"flex md:flex-row flex-xol flex-wrap justify-center items-center bg-white h-screen sm:px-6 lg:px-8",children:[(0,l.jsxs)("div",{className:"w-full sm:w-80 bg-white rounded-md shadow-xl m-3",children:[(0,l.jsx)("div",{className:"h-44 bg-gray-300 rounded-t-md animate-pulse"}),(0,l.jsxs)("div",{className:"p-5",children:[(0,l.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-1 mt-2 w-1/2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"flex w-screen md:w-full sm:w-96 bg-white rounded-md shadow-xl",children:[(0,l.jsx)("div",{className:"w-1/3 bg-gray-300 rounded-l-md animate-pulse"}),(0,l.jsxs)("div",{className:"p-5 w-3/4",children:[(0,l.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]}),(0,l.jsxs)("div",{className:"flex w-screen md:w-full sm:w-96 bg-white rounded-md shadow-xl",children:[(0,l.jsx)("div",{className:"w-1/3 bg-gray-300 rounded-l-md animate-pulse"}),(0,l.jsxs)("div",{className:"p-5 w-3/4",children:[(0,l.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,l.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]})]})]})});s.Z=r},7561:function(e,s,a){"use strict";a.r(s);var l=a(5893),r=a(7294),t=a(1163),d=a.n(t),i=a(1955),n=a(2049),m=a(6154);let c=()=>{let e=(0,t.useRouter)(),[s,a]=(0,r.useState)(!1),[c,o]=(0,r.useState)(""),[x,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)([]),[b,p]=(0,r.useState)(0),[N,j]=(0,r.useState)(0),[v,f]=(0,r.useState)(""),[w,y]=(0,r.useState)(""),[S,_]=(0,r.useState)(""),[I,k]=(0,r.useState)(""),C=i.Z.get("user_id"),E=i.Z.get("token"),P=async()=>{try{let e=await m.Z.get("/api/admin/shipping");j(e.data.data[0].shipping)}catch(e){o("Internet Connection not Stable. "),u(!0)}setTimeout(()=>{u(!1)},3e3)};(0,r.useEffect)(()=>{P()},[]),(0,r.useEffect)(()=>{if(C){let e=async()=>{try{let e=await fetch("/api/users?id=".concat(C),{method:"POST"});if(!e.ok)throw Error("Error fetching user data");let s=await e.json();k(s.name)}catch(e){console.log(e.message)}};e()}else e.push("/login?message=Please Log In")},[C]),(0,r.useEffect)(()=>{if(C||E){let e=async()=>{a(!0);try{let e=JSON.parse(localStorage.getItem("products"));g(e),function(){let e=JSON.parse(localStorage.getItem("products")),s=function(e){let s=0;for(let a=0;a<e.length;a++){let l=e[a],r=l.price*l.num,t=l.discount,d=r-r*t/100;s+=d}return s}(e);p(s)}(),a(!1)}catch(e){a(!1),o("Something went Wrong. "),u(!0)}setTimeout(()=>{u(!1)},3e3)};e()}else d().push("/login?message=PLease Login")},[]);let z=async e=>{e.preventDefault(),a(!0);let s=JSON.parse(localStorage.getItem("products"));try{let e=await m.Z.post("/api/order",{userId:C,cartItems:s,phoneNumber:v,address:w,apartment:S,totalPrice:b});"OK"==e.statusText?(localStorage.removeItem("productData"),localStorage.removeItem("products"),localStorage.removeItem("cartNumber"),d().push("/profile/orders")):(a(!1),o("Something went Wrong, Please try Again. "),u(!0))}catch(e){a(!1),o("Internet Connection not Stable. "),u(!0)}setTimeout(()=>{u(!1)},3e3)};return(0,l.jsxs)("div",{children:[s?(0,l.jsx)(n.Z,{}):null,x&&(0,l.jsx)("div",{className:"fixed top-0 left-0 lg:left-auto right-0 z-50 p-4",children:(0,l.jsxs)("div",{className:"mx-auto max-w-sm bg-white rounded-lg shadow-lg flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("svg",{className:"h-8 w-8 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M16 10a6 6 0 11-12 0 6 6 0 0112 0zm-6 5a1 1 0 100-2 1 1 0 000 2zm0-10a1 1 0 100-2 1 1 0 000 2zM5.78 14.55a4.002 4.002 0 01-1.513-1.513A5.984 5.984 0 013 10a6 6 0 1111.268 3H13a1 1 0 00-1 1v1a1 1 0 102 0v-1a3 3 0 00-3-3h-.268A5.992 5.992 0 015.78 14.55zM10 12a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),(0,l.jsx)("div",{className:"ml-4",children:(0,l.jsx)("div",{className:"mt-2 mx-2 text-sm text-gray-500",children:c})})]})}),(0,l.jsxs)("div",{className:"min-w-screen min-h-screen bg-gray-50 py-5",children:[(0,l.jsx)("div",{className:"px-5",children:(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("h1",{className:"text-3xl md:text-5xl font-bold text-gray-600",children:"Checkout."})})}),(0,l.jsx)("div",{className:"w-full bg-white border-t border-b border-gray-200 px-5 py-10 text-gray-800",children:(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{className:"-mx-3 md:flex items-start",children:[(0,l.jsxs)("div",{className:"px-3 md:w-7/12 md:pr-10",children:[h.map(e=>(0,l.jsx)("div",{className:"w-full mx-auto text-gray-800 font-light mb-6 border-b border-gray-200 pb-6",children:(0,l.jsxs)("div",{className:"w-full flex items-center",children:[(0,l.jsx)("div",{className:"overflow-hidden rounded-md w-16 h-16 bg-gray-50 border border-gray-200",children:(0,l.jsx)("img",{src:e.image,alt:""})}),(0,l.jsxs)("div",{className:"flex-grow pl-3",children:[(0,l.jsx)("h6",{className:"font-semibold uppercase text-gray-600",children:e.name}),(0,l.jsxs)("p",{className:"text-gray-400",children:["x ",e.num]}),(0,l.jsxs)("span",{children:[" discount: ",e.discount,"%"]})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("span",{className:"font-semibold text-gray-600 text-xl",children:["Rs"," ",((e.price-e.price*e.discount/100)*e.num).toLocaleString("en-IN")]})})]})})),(0,l.jsx)("div",{className:"mb-6 pb-6 border-b border-gray-200"}),(0,l.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200 text-gray-800",children:[(0,l.jsxs)("div",{className:"w-full flex mb-3 items-center",children:[(0,l.jsx)("div",{className:"flex-grow",children:(0,l.jsx)("span",{className:"text-gray-600",children:"Dilivery"})}),(0,l.jsx)("div",{className:"pl-3",children:(0,l.jsxs)("span",{className:"font-semibold",children:["Rs ",N.toLocaleString("en-IN")]})})]}),(0,l.jsxs)("div",{className:"w-full flex items-center",children:[(0,l.jsx)("div",{className:"flex-grow",children:(0,l.jsx)("span",{className:"text-gray-600",children:"Subtotal"})}),(0,l.jsx)("div",{className:"pl-3",children:(0,l.jsxs)("span",{className:"font-semibold",children:["Rs ",(b+N).toLocaleString("en-IN")]})})]})]})]}),(0,l.jsxs)("form",{onSubmit:z,className:"px-3 md:w-5/12",children:[(0,l.jsx)("div",{className:"w-full mx-auto rounded-md bg-white border border-gray-200 text-gray-800 font-light mb-6",children:(0,l.jsx)("div",{className:"w-full p-3 border-b border-gray-200",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"phoneNumber",className:"text-gray-600 font-semibold text-sm mb-2 ml-1",children:"Phone Number"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{id:"phoneNumber",className:"w-full px-3 py-2 mb-1 border border-gray-200 rounded-md focus:outline-none focus:border-indigo-500 transition-colors",placeholder:"+977-0000000000",type:"tel",pattern:"[+]{0,1}[0-9]{1,}[0-9]{5,}",title:"Please enter a valid phone number (e.g. +977-0000000000)",value:v,onChange:e=>f(e.target.value),required:!0})})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"address",className:"text-gray-600 font-semibold text-sm mb-2 ml-1",children:"Address"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{id:"address",className:"w-full px-3 py-2 mb-1 border border-gray-200 rounded-md focus:outline-none focus:border-indigo-500 transition-colors",placeholder:"Address",type:"text",value:w,onChange:e=>y(e.target.value),required:!0})})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"apartment",className:"text-gray-600 font-semibold text-sm mb-2 ml-1",children:"Apartment, suite, etc."}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{id:"apartment",className:"w-full px-3 py-2 mb-1 border border-gray-200 rounded-md focus:outline-none focus:border-indigo-500 transition-colors",placeholder:"Apartment, suite, etc.",type:"text",value:S,onChange:e=>_(e.target.value)})})]})]})})}),(0,l.jsx)("div",{children:(0,l.jsxs)("button",{type:"submit",className:"block w-full max-w-xs mx-auto bg-themecolor text-white rounded-md px-3 py-2 font-semibold",children:[(0,l.jsx)("i",{className:"mdi mdi-lock-outline mr-1"})," Cash on Delivery"]})})]})]})})})]})]})};s.default=c}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5729)}),_N_E=e.O()}]);